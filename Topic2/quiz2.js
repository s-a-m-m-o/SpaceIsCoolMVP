const questions = [
  {
      question: "What is spectroscopy?",
      optionA: "The process of breaking up light into individual wavelengths",
      optionB: "The process of classifying stars",
      optionC: "A type of star",
      optionD: "A substellar object",
      correctOption: "optionA"
  },

  {
      question: "Who was the first person to expirement with spectroscopy?",
      optionA: "Annie Jump Cannon",
      optionB: "Ejnar Hertzsprung",
      optionC: "Henry Norris Russell",
      optionD: "Isaac Newton",
      correctOption: "optionD"
  },

  {
    question: "What did Isaac Newton use to demonstrate spectroscopy?",
    optionA: "Glass",
    optionB: "Prisms",
    optionC: "Telescope",
    optionD: "Paper",
    correctOption: "optionB"
},

{
  question: "What colours make up ordninary sunlight?",
  optionA: "Only warm colors",
  optionB: "Only cool colors",
  optionC: "All colors of the rainbow",
  optionD: "Shades of black and white",
  correctOption: "optionC"
},

{
question: "What are the dark lines in the colour spectrum?",
optionA: "Gaps in the Moon's spectrum",
optionB: "Gaps in the Sun's spectrum",
optionC: "Gaps in the Planet's spectrum",
optionD: "Gaps in the Brightness spectrum",
correctOption: "optionB"
},

{
question: "What is the difference between the black lines in the sun's spectrum and a star's spectrum",
optionA: "They are the same",
optionB: "The Sun does not have a spectrum",
optionC: "They are missing in different places",
optionD: "The Sun has black lines while to other one does not",
correctOption: "optionC"
},

{
question: "What creates absorption lines?",
optionA: "Stars absorb some of the emitted light",
optionB: "Stars don't emit light all the time",
optionC: "Something blocking the light",
optionD: "The star exploding",
correctOption: "optionA"
},

{
question: "What do scientists use absorption lines for?",
optionA: "Learn more about size of stars",
optionB: "Learn more about distance of stars",
optionC: "Learn more about colour of stars",
optionD: "Learn more about chemical composition of stars",
correctOption: "optionD"
},

{
question: "How did they assign stars into categories in The Draper Catalogue of Stellar Spectrum?",
optionA: "A-Z",
optionB: "1-100",
optionC: "1-10",
optionD: "A-O",
correctOption: "optionD"
},


{
question: "What specific aspect of the stars was used to classify them in The Draper Catalogue of Stellar Spectrum?",
optionA: "Strength of their hydrogen lines",
optionB: "Brightness of the star",
optionC: "Color of the star",
optionD: "Size of the star",
correctOption: "optionA"
},

{
question: "What is the name of the group that worked on the classification of stars?",
optionA: "Harvard Calculators",
optionB: "Harvard Computers",
optionC: "Harvard's Calcuator",
optionD: "Computers of Harvard",
correctOption: "optionB"
},

{
question: "Who are the Harvard Computers?",
optionA: "A group of men",
optionB: "A group of students",
optionC: "A group of professors",
optionD: "A group of women",
correctOption: "optionD"
},

{
question: "What did the Harvard Computers do?",
optionA: "Perform computations, calculations, data analytics",
optionB: "Researched discovered planets",
optionC: "Try to determine color of planets",
optionD: "Measure distance of planets from Earth",
correctOption: "optionA"
},

{
question: "What did Annie Jump Cannon suggest to classify stars?",
optionA: "Use their colour",
optionB: "Use their size",
optionC: "Use their brightness",
optionD: "Use their surface temperature",
correctOption: "optionD"
},

{
question: "What is the Harvard System?",
optionA: "Classification of the temperature of stars",
optionB: "Classification of substellar objects",
optionC: "Classification of planets",
optionD: "Classification of the size of stars",
correctOption: "optionA"
},

{
question: "What classification does the Harvard System use?",
optionA: "A, B, C, D, E, F, G",
optionB: "1, 2, 3, 4, 5, 6, 7",
optionC: "O, B, A, F, G, K, M",
optionD: "0, 1, 2, A, B, C, D",
correctOption: "optionC"
},

{
question: "O stars are __ (based on Harvard System)?",
optionA: "The furthest",
optionB: "The hottest",
optionC: "The coolest",
optionD: "The brightest",
correctOption: "optionB"
},

{
question: "M stars are __ (based on Harvard System)?",
optionA: "The furthest",
optionB: "The hottest",
optionC: "The coolest",
optionD: "The brightest",
correctOption: "optionC"
},

{
question: "What type of star is the Sun (based on the Harvard System)?",
optionA: "O",
optionB: "M",
optionC: "G",
optionD: "A",
correctOption: "optionC"
},

{
question: "What is the HR diagram?",
optionA: "Sorts the stars by size and temperature",
optionB: "Sorts the stars by brightness and size",
optionC: "Sorts the stars by brightness and colour",
optionD: "Sorts the stars by brightness and temperature",
correctOption: "optionD"
},

{
question: "What is the main sequence?",
optionA: "A selection of stars on the HR diagram",
optionB: "The main section in the life of a star",
optionC: "The main area where stars are located",
optionD: "The beginning of a stars life",
correctOption: "optionA"
},

{
question: "Stars in the __ are using hydrogen in their core to form helium?",
optionA: "Main sequence",
optionB: "Bottom left of the HR diagram",
optionC: "Top right of the HR diagram",
optionD: "HR diagram",
correctOption: "optionA"
},

{
question: "When do stars use hydrogen to form helium?",
optionA: "At the beginning of their life",
optionB: "At the end of their life",
optionC: "During the longest phase of their life",
optionD: "Stars do not use hydrogen to form helium",
correctOption: "optionC"
},

{
question: "What percentage of stars are in the main sequence?",
optionA: "80%",
optionB: "90%",
optionC: "50%",
optionD: "100%",
correctOption: "optionB"
},

{
question: "What shape do the stars, in the main sequence, make on the HR diagram?",
optionA: "A curve",
optionB: "A circle",
optionC: "An odd shape",
optionD: "A diagonal line",
correctOption: "optionD"
},

{
question: "Stars at the top left are __(on the HR diagram)?",
optionA: "The furthest from Earth",
optionB: "Hotter and brighter",
optionC: "Cooler and dimmer",
optionD: "Bigger and closer to Earth",
correctOption: "optionB"
},

{
question: "Which stars are cooler and dimmer?",
optionA: "Bottom right on the HR diagram",
optionB: "Top left on the HR diagram",
optionC: "All stars on the HR diagram",
optionD: "None of the stars on the HR diagram",
correctOption: "optionA"
},

{
question: "What stars are above the main sequence (HR diagram)?",
optionA: "Brown dwarfs",
optionB: "White dwarfs",
optionC: "Supernovas",
optionD: "Giants, supergiants",
correctOption: "optionD"
},

{
question: "When do stars become giants, supergiants?",
optionA: "When they reach a certain temperature",
optionB: "When they deplete their hydrogen cores",
optionC: "When they reach a certain size",
optionD: "When they collide with another star",
correctOption: "optionB"
},

{
question: "What triggers fusion of heavier elements in the stars core?",
optionA: "The build-up of helium",
optionB: "A collision",
optionC: "When they reach a certain size",
optionD: "The build-up of heat",
correctOption: "optionD"
},

{
question: "What happens when heavier elements fuse in the core of the star?",
optionA: "Outer layer expands",
optionB: "Middle layer collapses",
optionC: "Outer layer shrinks",
optionD: "Middle layer expands",
correctOption: "optionA"
},

{
question: "How big do stars expand?",
optionA: "They become smaller than the original size",
optionB: "Double their original size",
optionC: "Stay the same size",
optionD: "Many times their original size",
correctOption: "optionD"
},

{
question: "Why are giant stars more luminous than the Sun?",
optionA: "Due to their distance from Earth",
optionB: "Due to their size",
optionC: "They are very similar in terms of brightness",
optionD: "The Sun is more luminous",
correctOption: "optionB"
},

{
question: "What happens when a star exhausts fusion in its core?",
optionA: "Becomes a white dwarf",
optionB: "The star reaches the end of its life",
optionC: "Moves onto the next phase of its life",
optionD: "Nothing, the star keeps on shining",
correctOption: "optionC"
},

{
question: "What are white dwarfs?",
optionA: "All stars are white dwarfs",
optionB: "Small stars that shine bright and are white",
optionC: "A dense, dim, cooling core left behind by smaller stars",
optionD: "An explosion left behind by a supergiant",
correctOption: "optionC"
},

{
question: "Where are white dwarfs located on the HR diagram?",
optionA: "Lower right corner",
optionB: "Lower left corner",
optionC: "Middle of the diagram",
optionD: "They are not on the HR diagram",
correctOption: "optionB"
},

{
question: "What happens to a white dwarf over time?",
optionA: "Cools down and brightens",
optionB: "Heats up and brightens",
optionC: "Heats up and darkens",
optionD: "Cools down and darkens",
correctOption: "optionD"
},

{
question: "Why do white dwarfs cool down?",
optionA: "Can't produce additional energy",
optionB: "Space is too cold for stars to stay warm",
optionC: "It stays the same temperature",
optionD: "They actually heat up again",
correctOption: "optionA"
},

{
question: "What is a black dwarf?",
optionA: "Same thing as a white dwarf",
optionB: "A cooled down and dark white dwarf",
optionC: "A star that has reached the end of its life",
optionD: "It's not a star",
correctOption: "optionB"
},

{
question: "What are black dwarfs made of?",
optionA: "Mostly helium",
optionB: "Mostly hydrogen",
optionC: "Mostly carbon",
optionD: "Made of small rocks and dust",
correctOption: "optionC"
},

{
question: "What type of star does not emit heat or light?",
optionA: "A white dwarf",
optionB: "A black dwarf",
optionC: "A supernova",
optionD: "A giant",
correctOption: "optionB"
},

{
question: "What is a supernova?",
optionA: "A supergiant that exploded",
optionB: "A white dwarf that exploded",
optionC: "A black dwarf that exploded",
optionD: "An extremely big and dense star",
correctOption: "optionA"
},

{
question: "When are supernovas created?",
optionA: "End of its lifespan of a white warf",
optionB: "End of its lifespan of a black dwarf",
optionC: "End of its life of a supergiant",
optionD: "End of the Sun's life",
correctOption: "optionC"
},

{
question: "What creates a black hole?",
optionA: "A white dwarf",
optionB: "A black dwarf",
optionC: "A supergiant",
optionD: "A supernova",
correctOption: "optionD"
},

{
question: "A black hole __ a star?",
optionA: "Is",
optionB: "Becomes",
optionC: "Is not",
optionD: "Is made of",
correctOption: "optionC"
},

{
question: "Other than black holes what can supernovas become?",
optionA: "Nothing else",
optionB: "A Neutron star",
optionC: "A white dwarf",
optionD: "A black dwarf",
correctOption: "optionB"
},
{
question: "What is a neutron star?",
optionA: "Super dense body left behind by a supernova",
optionB: "Super dense body left behind by a white dwarf",
optionC: "Super dense body left behind by a black dwarf",
optionD: "A regular star that is very dense",
correctOption: "optionA"
},

{
question: "Neutron satrs have __?",
optionA: "No magnetic field",
optionB: "Very strong magnetic fields",
optionC: "Very birght light",
optionD: "A very unstructured body",
correctOption: "optionB"
},

{
question: "What is a pulsar?",
optionA: "A neutron star that emits radiation",
optionB: "A neutron star that does not emit radiation",
optionC: "A supernova that emits radiation",
optionD: "Not a star",
correctOption: "optionA"
},

{
question: "What are brown dwarfs?",
optionA: "A star",
optionB: "A planet",
optionC: "A substellar object",
optionD: "An asteroid",
correctOption: "optionC"
},

{
question: "What is a failed star?",
optionA: "A white dwarf",
optionB: "A black dwarf",
optionC: "A brown dwarf",
optionD: "A supernova",
correctOption: "optionC"
},

{
question: "Why is a brown dwarf a failed star?",
optionA: "It did not start a nuclear fusion",
optionB: "It never heated up",
optionC: "It never emited light",
optionD: "It died when it became a star",
correctOption: "optionA"
},

{
question: "Brown dwarfs are __ than gas giants?",
optionA: "Closer",
optionB: "Warmer",
optionC: "Smaller",
optionD: "More massive",
correctOption: "optionD"
},

{
question: "What surface temperature do brown dwarfs have?",
optionA: "Very warm",
optionB: "relatively low",
optionC: "None at all",
optionD: "Same as Earth",
correctOption: "optionB"
},

{
question: "What do brown dwarfs emit?",
optionA: "Light",
optionB: "Radiation",
optionC: "Infrared wavelength",
optionD: "Heat",
correctOption: "optionC"
},
]
let shuffledQuestions = [] //empty array to hold shuffled selected questions out of all available questions

function handleQuestions() { 
//function to shuffle and push 10 questions to shuffledQuestions array
//app would be dealing with 10questions per session
  while (shuffledQuestions.length <= 9) {
      const random = questions[Math.floor(Math.random() * questions.length)]
      if (!shuffledQuestions.includes(random)) {
          shuffledQuestions.push(random)
      }
  }
}


let questionNumber = 1 //holds the current question number
let playerScore = 0  //holds the player score
let wrongAttempt = 0 //amount of wrong answers picked by player
let indexNumber = 0 //will be used in displaying next question

// function for displaying next question in the array to dom
//also handles displaying players and quiz information to dom
function NextQuestion(index) {
  handleQuestions()
  const currentQuestion = shuffledQuestions[index]
  document.getElementById("question-number").innerHTML = questionNumber
  document.getElementById("player-score").innerHTML = playerScore
  document.getElementById("display-question").innerHTML = currentQuestion.question;
  document.getElementById("option-one-label").innerHTML = currentQuestion.optionA;
  document.getElementById("option-two-label").innerHTML = currentQuestion.optionB;
  document.getElementById("option-three-label").innerHTML = currentQuestion.optionC;
  document.getElementById("option-four-label").innerHTML = currentQuestion.optionD;

}


function checkForAnswer() {
  const currentQuestion = shuffledQuestions[indexNumber] //gets current Question 
  const currentQuestionAnswer = currentQuestion.correctOption //gets current Question's answer
  const options = document.getElementsByName("option"); //gets all elements in dom with name of 'option' (in this the radio inputs)
  let correctOption = null

  options.forEach((option) => {
      if (option.value === currentQuestionAnswer) {
          //get's correct's radio input with correct answer
          correctOption = option.labels[0].id
      }
  })

  //checking to make sure a radio input has been checked or an option being chosen
  if (options[0].checked === false && options[1].checked === false && options[2].checked === false && options[3].checked == false) {
      document.getElementById('option-modal').style.display = "flex"
  }

  //checking if checked radio button is same as answer
  options.forEach((option) => {
      if (option.checked === true && option.value === currentQuestionAnswer) {
          document.getElementById(correctOption).style.backgroundColor = "green"
          playerScore++ //adding to player's score
          indexNumber++ //adding 1 to index so has to display next question..
          //set to delay question number till when next question loads
          setTimeout(() => {
              questionNumber++
          }, 1000)
      }

      else if (option.checked && option.value !== currentQuestionAnswer) {
          const wrongLabelId = option.labels[0].id
          document.getElementById(wrongLabelId).style.backgroundColor = "red"
          document.getElementById(correctOption).style.backgroundColor = "green"
          wrongAttempt++ //adds 1 to wrong attempts 
          indexNumber++
          //set to delay question number till when next question loads
          setTimeout(() => {
              questionNumber++
          }, 1000)
      }
  })
}



//called when the next button is called
function handleNextQuestion() {
  checkForAnswer() //check if player picked right or wrong option
  unCheckRadioButtons()
  //delays next question displaying for a second just for some effects so questions don't rush in on player
  setTimeout(() => {
      if (indexNumber <= 9) {
//displays next question as long as index number isn't greater than 9, remember index number starts from 0, so index 9 is question 10
          NextQuestion(indexNumber)
      }
      else {
          handleEndGame()//ends game if index number greater than 9 meaning we're already at the 10th question
      }
      resetOptionBackground()
  }, 1000);
}

//sets options background back to null after display the right/wrong colors
function resetOptionBackground() {
  const options = document.getElementsByName("option");
  options.forEach((option) => {
      document.getElementById(option.labels[0].id).style.backgroundColor = ""
  })
}

// unchecking all radio buttons for next question(can be done with map or foreach loop also)
function unCheckRadioButtons() {
  const options = document.getElementsByName("option");
  for (let i = 0; i < options.length; i++) {
      options[i].checked = false;
  }
}

// function for when all questions being answered
function handleEndGame() {
  let remark = null
  let remarkColor = null

  // condition check for player remark and remark color
  if (playerScore <= 3) {
      remark = "Bad Grades, Keep Practicing."
      remarkColor = "red"
  }
  else if (playerScore >= 4 && playerScore < 7) {
      remark = "Average Grades, You can do better."
      remarkColor = "orange"
  }
  else if (playerScore >= 7) {
      remark = "Excellent, Keep the good work going."
      remarkColor = "green"
  }
  const playerGrade = (playerScore / 10) * 100

  //data to display to score board
  document.getElementById('remarks').innerHTML = remark
  document.getElementById('remarks').style.color = remarkColor
  document.getElementById('grade-percentage').innerHTML = playerGrade
  document.getElementById('wrong-answers').innerHTML = wrongAttempt
  document.getElementById('right-answers').innerHTML = playerScore
  document.getElementById('score-modal').style.display = "flex"

}

//closes score modal, resets game and reshuffles questions
function closeScoreModal() {
  questionNumber = 1
  playerScore = 0
  wrongAttempt = 0
  indexNumber = 0
  shuffledQuestions = []
  NextQuestion(indexNumber)
  document.getElementById('score-modal').style.display = "none"
}

//function to close warning modal
function closeOptionModal() {
  document.getElementById('option-modal').style.display = "none"
}